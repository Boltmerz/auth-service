{"version":3,"sources":["../../../src/services/auth/authenticate.js"],"names":["authenticateUser","username","password","user","console","log","id","isAuthenticated","UserUnauthorized","firstName","lastName","email","birthDate"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,IAAMA,gBAAgB;AAAA,2FAAG,iBAAOC,QAAP,EAAiBC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACX,gCAAkBD,QAAlB,CADW;;AAAA;AACxBE,YAAAA,IADwB;AAE9BC,YAAAA,OAAO,CAACC,GAAR,iBAAqBF,IAAI,CAACG,EAA1B;AACAF,YAAAA,OAAO,CAACC,GAAR,qBAAyBF,IAAI,CAACD,QAA9B;AAH8B;AAAA,mBAKA,wBAAaA,QAAb,EAAuBC,IAAI,CAACD,QAA5B,CALA;;AAAA;AAKxBK,YAAAA,eALwB;AAM9BH,YAAAA,OAAO,CAACC,GAAR,4BAAgCE,eAAhC;;AAN8B,kBAQ1B,CAACJ,IAAD,IAAS,CAACI,eARgB;AAAA;AAAA;AAAA;;AAAA,kBAQS,IAAIC,wBAAJ,CAAqB,2BAArB,CART;;AAAA;AAW5BF,YAAAA,EAX4B,GAY1BH,IAZ0B,CAW5BG,EAX4B,EAWxBG,SAXwB,GAY1BN,IAZ0B,CAWxBM,SAXwB,EAWbC,QAXa,GAY1BP,IAZ0B,CAWbO,QAXa,EAWHC,KAXG,GAY1BR,IAZ0B,CAWHQ,KAXG,EAWIC,SAXJ,GAY1BT,IAZ0B,CAWIS,SAXJ;AAAA,6CAavB,mBAAS;AACdN,cAAAA,EAAE,EAAFA,EADc;AACVG,cAAAA,SAAS,EAATA,SADU;AACCC,cAAAA,QAAQ,EAARA,QADD;AACWC,cAAAA,KAAK,EAALA,KADX;AACkBC,cAAAA,SAAS,EAATA,SADlB;AAC6BX,cAAAA,QAAQ,EAARA;AAD7B,aAAT,CAbuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBD,gBAAgB;AAAA;AAAA;AAAA,GAAtB","sourcesContent":["import { validateHash } from '../../utils/hash';\nimport { getUserByUsername } from '../user/getUser';\nimport { generate } from '../../utils/jwt';\nimport { UserUnauthorized } from '../../utils/Errors';\n\nexport const authenticateUser = async (username, password) => {\n  const user = await getUserByUsername(username);\n  console.log(`user: ${user.id}`)\n  console.log(`password: ${user.password}`)\n\n  const isAuthenticated = await validateHash(password, user.password);\n  console.log(`isAuthenticated: ${isAuthenticated}`)\n\n  if (!user || !isAuthenticated) { throw new UserUnauthorized('Invalid Username/Password'); }\n\n  const {\n    id, firstName, lastName, email, birthDate,\n  } = user;\n  return generate({\n    id, firstName, lastName, email, birthDate, username,\n  });\n};\n"],"file":"authenticate.js"}